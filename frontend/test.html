<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AceHub - Gaming Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .discord-btn {
            background: #5865F2;
            transition: all 0.3s ease;
        }
        .discord-btn:hover {
            background: #4752C4;
            transform: scale(1.05);
        }
        .stream-indicator {
            animation: streamPulse 1.5s infinite;
        }
        @keyframes streamPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen gradient-bg flex items-center justify-center">
        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full mx-4 border border-white/20">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">üéÆ</div>
                <h1 class="text-4xl font-bold mb-2">AceHub</h1>
                <p class="text-gray-300">Tu plataforma de gaming competitivo</p>
            </div>
            
            <button onclick="loginWithDiscord()" class="discord-btn w-full py-4 px-6 rounded-xl text-white font-semibold flex items-center justify-center gap-3 mb-6">
                <i class="fab fa-discord text-2xl"></i>
                Iniciar sesi√≥n con Discord
            </button>
            
            <div class="text-center text-sm text-gray-400">
                <p>Conecta tu cuenta de Discord para acceder</p>
                <p>a todas las funciones de AceHub</p>
            </div>
        </div>
    </div>

    <!-- Setup Panel for New Users -->
    <div id="setupPanel" class="hidden min-h-screen gradient-bg flex items-center justify-center">
        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-2xl w-full mx-4 border border-white/20">
            <div class="text-center mb-8">
                <div class="text-4xl mb-4">‚öôÔ∏è</div>
                <h2 class="text-3xl font-bold mb-2">¬°Bienvenido a AceHub!</h2>
                <p class="text-gray-300">Configura tu perfil para comenzar</p>
            </div>
            
            <div class="space-y-6">
                <!-- Riot ID Input -->
                <div>
                    <label class="block text-sm font-semibold mb-2">Riot ID</label>
                    <input type="text" id="riotId" placeholder="NombreUsuario#TAG" 
                           class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-blue-400">
                    <p class="text-xs text-gray-400 mt-1">Ejemplo: ProGamer#1234</p>
                </div>
                
                <!-- Role Selection -->
                <div>
                    <label class="block text-sm font-semibold mb-4">Roles en Valorant (m√°ximo 2)</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="role-card bg-white/5 border border-white/20 rounded-lg p-4 cursor-pointer hover:bg-white/10 transition-all" onclick="toggleRole('duelista')">
                            <div class="text-center">
                                <div class="text-3xl mb-2">‚öîÔ∏è</div>
                                <h3 class="font-semibold">Duelista</h3>
                                <p class="text-xs text-gray-400">Entrada y eliminaciones</p>
                            </div>
                        </div>
                        <div class="role-card bg-white/5 border border-white/20 rounded-lg p-4 cursor-pointer hover:bg-white/10 transition-all" onclick="toggleRole('controlador')">
                            <div class="text-center">
                                <div class="text-3xl mb-2">üõ°Ô∏è</div>
                                <h3 class="font-semibold">Controlador</h3>
                                <p class="text-xs text-gray-400">Control de mapa</p>
                            </div>
                        </div>
                        <div class="role-card bg-white/5 border border-white/20 rounded-lg p-4 cursor-pointer hover:bg-white/10 transition-all" onclick="toggleRole('iniciador')">
                            <div class="text-center">
                                <div class="text-3xl mb-2">üîç</div>
                                <h3 class="font-semibold">Iniciador</h3>
                                <p class="text-xs text-gray-400">Informaci√≥n y apoyo</p>
                            </div>
                        </div>
                        <div class="role-card bg-white/5 border border-white/20 rounded-lg p-4 cursor-pointer hover:bg-white/10 transition-all" onclick="toggleRole('centinela')">
                            <div class="text-center">
                                <div class="text-3xl mb-2">üè∞</div>
                                <h3 class="font-semibold">Centinela</h3>
                                <p class="text-xs text-gray-400">Defensa y retaguardia</p>
                            </div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-400 mt-2">Selecciona 1 o 2 roles que prefieras jugar</p>
                </div>
                
                <button onclick="completeSetup()" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 py-4 px-6 rounded-xl text-white font-semibold hover:from-blue-500 hover:to-purple-500 transition-all">
                    Completar Configuraci√≥n
                </button>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="hidden">
        <!-- Header -->
        <header class="bg-gray-800 border-b border-gray-700 px-6 py-4">
            <div class="flex items-center justify-between max-w-7xl mx-auto">
                <div class="flex items-center gap-4">
                    <div class="text-2xl">üéÆ</div>
                    <h1 class="text-2xl font-bold">AceHub</h1>
                </div>
                
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2 bg-green-600 px-3 py-1 rounded-full text-sm">
                        <div class="w-2 h-2 bg-white rounded-full"></div>
                        <span>En l√≠nea</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <img src="https://via.placeholder.com/32x32/5865F2/FFFFFF?text=U" alt="Avatar" class="w-8 h-8 rounded-full">
                        <span id="username">Usuario#1234</span>
                    </div>
                    <button onclick="logout()" class="text-gray-400 hover:text-white">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-gray-800 px-6 py-2 border-b border-gray-700">
            <div class="max-w-7xl mx-auto">
                <div class="flex gap-8">
                    <button onclick="showSection('public')" class="nav-btn px-4 py-2 rounded-lg bg-blue-600 text-white">
                        <i class="fas fa-users mr-2"></i>10 Mans P√∫blicos
                    </button>
                    <button onclick="showSection('premier')" class="nav-btn px-4 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-gray-700">
                        <i class="fas fa-crown mr-2"></i>10 Mans Elite
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-6 py-8">
            <!-- Public 10 Mans Section -->
            <div id="publicSection" class="section">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold mb-2">10 Mans P√∫blicos</h2>
                    <p class="text-gray-400">Partidas abiertas para toda la comunidad</p>
                </div>

                <!-- Quick Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gray-800 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-400 text-sm">Jugadores Activos</p>
                                <p class="text-2xl font-bold text-green-400">247</p>
                            </div>
                            <i class="fas fa-users text-green-400 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-400 text-sm">Partidas Hoy</p>
                                <p class="text-2xl font-bold text-blue-400">18</p>
                            </div>
                            <i class="fas fa-gamepad text-blue-400 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-400 text-sm">Tu Rating</p>
                                <p class="text-2xl font-bold text-yellow-400">2,456</p>
                            </div>
                            <i class="fas fa-star text-yellow-400 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-gray-800 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-400 text-sm">Tu Ranking</p>
                                <p class="text-2xl font-bold text-purple-400">#42</p>
                            </div>
                            <i class="fas fa-trophy text-purple-400 text-2xl"></i>
                        </div>
                    </div>
                </div>

                <!-- Sub Navigation -->
                <div class="flex gap-4 mb-6">
                    <button onclick="showTab('public', 'queue')" class="tab-btn bg-blue-600 text-white px-6 py-2 rounded-lg">
                        <i class="fas fa-clock mr-2"></i>Cola
                    </button>
                    <button onclick="showTab('public', 'matches')" class="tab-btn text-gray-300 hover:text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                        <i class="fas fa-play mr-2"></i>Partidas
                    </button>
                    <button onclick="showTab('public', 'leaderboard')" class="tab-btn text-gray-300 hover:text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                        <i class="fas fa-trophy mr-2"></i>Leaderboard
                    </button>
                    <button onclick="showTab('public', 'mymatches')" class="tab-btn text-gray-300 hover:text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                        <i class="fas fa-user mr-2"></i>Mis Partidas
                    </button>
                </div>

                <!-- Queue Tab Content -->
                <div id="publicQueue" class="tab-content">
                    <div id="publicQueueContent"></div>
                </div>

                <!-- Other tabs content -->
                <div id="publicMatches" class="tab-content hidden">
                    <div class="mb-6 flex justify-between items-center">
                        <h3 class="text-xl font-bold">Partidas En Vivo</h3>
                        <div class="text-sm text-gray-400">
                            <span class="text-red-400">‚óè</span> 3 partidas activas
                        </div>
                    </div>
                    <div class="space-y-6">
                        <!-- Live matches will be populated here -->
                        <div class="bg-gray-800 rounded-xl p-6 card-hover border-l-4 border-red-500">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-4">
                                    <span class="bg-red-600 px-3 py-1 rounded-full text-xs font-bold pulse-animation">EN VIVO</span>
                                    <span class="font-semibold text-lg">Ascent</span>
                                    <span class="text-gray-400">25:34 transcurridos</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-6 mb-4">
                                <div class="bg-blue-900/30 rounded-lg p-4">
                                    <h4 class="text-blue-400 font-bold mb-3 text-center">Equipo A</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between items-center">
                                            <div class="flex items-center gap-2">
                                                <span>ProGamer#2023</span>
                                                <div class="w-2 h-2 bg-red-500 rounded-full stream-indicator"></div>
                                            </div>
                                            <button onclick="openStream('ProGamer#2023')" class="bg-purple-600 hover:bg-purple-500 px-2 py-1 rounded text-xs">
                                                <i class="fab fa-twitch mr-1"></i>Stream
                                            </button>
                                        </div>
                                        <div><span>SkillMaster#1337</span></div>
                                        <div><span>AcePlayer#9999</span></div>
                                        <div><span>HeadHunter#5555</span></div>
                                        <div><span>QuickScope#7777</span></div>
                                    </div>
                                </div>
                                
                                <div class="bg-red-900/30 rounded-lg p-4">
                                    <h4 class="text-red-400 font-bold mb-3 text-center">Equipo B</h4>
                                    <div class="space-y-2 text-sm">
                                        <div><span>EliteShooter#999</span></div>
                                        <div><span>FastAim#777</span></div>
                                        <div><span>GameLord#321</span></div>
                                        <div><span>SniperKing#666</span></div>
                                        <div><span>CyberNinja#888</span></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center bg-gray-700 rounded-lg p-3">
                                <span class="text-lg font-semibold text-gray-300">Partida en progreso</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="publicLeaderboard" class="tab-content hidden">
                    <div class="bg-gray-800 rounded-xl overflow-hidden">
                        <div class="p-6 border-b border-gray-700">
                            <h3 class="text-xl font-bold">üèÜ Top Jugadores P√∫blicos</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-gray-700">
                                    <tr>
                                        <th class="px-2 py-3 text-left">#</th>
                                        <th class="px-3 py-3 text-left">Player</th>
                                        <th class="px-2 py-3 text-center">Matches</th>
                                        <th class="px-2 py-3 text-center">ACS</th>
                                        <th class="px-2 py-3 text-center">KDA</th>
                                        <th class="px-2 py-3 text-center">HS%</th>
                                        <th class="px-2 py-3 text-center">FK</th>
                                        <th class="px-2 py-3 text-center">KAST%</th>
                                        <th class="px-2 py-3 text-center">ADR</th>
                                        <th class="px-2 py-3 text-center">DDŒî</th>
                                        <th class="px-2 py-3 text-center">Score</th>
                                    </tr>
                                </thead>
                                <tbody id="publicLeaderboardBody" class="divide-y divide-gray-700">
                                    <!-- Data will be populated from backend -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="publicMymatches" class="tab-content hidden">
                    <div class="mb-4 flex justify-between items-center">
                        <h3 class="text-xl font-bold">Mis Partidas</h3>
                        <div class="text-sm text-gray-400">
                            <span class="text-green-400">12V</span> - <span class="text-red-400">8D</span> (60% WR)
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-gray-800 rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-4">
                                    <div class="bg-green-600 w-4 h-4 rounded-full"></div>
                                    <span class="font-semibold">Victoria</span>
                                    <span class="text-gray-400">hace 2 horas</span>
                                </div>
                                <span class="text-green-400 font-bold">+25 Rating</span>
                            </div>
                            <div class="flex justify-between items-center text-sm mb-2">
                                <span>Ascent</span>
                                <span class="text-gray-400">45:23 duraci√≥n</span>
                            </div>
                            <div class="flex items-center gap-4 text-xs text-gray-400">
                                <span>‚öîÔ∏è Duelista</span>
                                <span class="text-yellow-400">MVP</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Elite 10 Mans Section -->
            <div id="premierSection" class="section hidden">
                <div class="mb-8">
                    <div class="flex items-center gap-4 mb-4">
                        <h2 class="text-3xl font-bold">10 Mans Elite</h2>
                        <span class="bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-3 py-1 rounded-full text-sm font-bold">
                            <i class="fas fa-crown mr-1"></i>ELITE
                        </span>
                    </div>
                    <p class="text-gray-400">Partidas exclusivas para jugadores verificados por el staff</p>
                </div>

                <!-- Premier Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-200 text-sm">Jugadores Elite</p>
                                <p class="text-2xl font-bold">89</p>
                            </div>
                            <i class="fas fa-crown text-yellow-400 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-200 text-sm">Partidas Elite</p>
                                <p class="text-2xl font-bold">12</p>
                            </div>
                            <i class="fas fa-star text-yellow-400 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-green-600 to-green-700 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-200 text-sm">Tu Rating Elite</p>
                                <p class="text-2xl font-bold">3,245</p>
                            </div>
                            <i class="fas fa-trophy text-yellow-400 text-2xl"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-red-600 to-red-700 rounded-xl p-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-red-200 text-sm">Ranking Elite</p>
                                <p class="text-2xl font-bold">#8</p>
                            </div>
                            <i class="fas fa-medal text-yellow-400 text-2xl"></i>
                        </div>
                    </div>
                </div>

                <!-- Premier Navigation -->
                <div class="flex gap-4 mb-6">
                    <button onclick="showTab('premier', 'queue')" class="tab-btn bg-purple-600 text-white px-6 py-2 rounded-lg">
                        <i class="fas fa-clock mr-2"></i>Cola Elite
                    </button>
                    <button onclick="showTab('premier', 'matches')" class="tab-btn text-gray-300 hover:text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                        <i class="fas fa-play mr-2"></i>Partidas Elite
                    </button>
                    <button onclick="showTab('premier', 'leaderboard')" class="tab-btn text-gray-300 hover:text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                        <i class="fas fa-crown mr-2"></i>Elite Leaderboard
                    </button>
                    <button onclick="showTab('premier', 'mymatches')" class="tab-btn text-gray-300 hover:text-white px-6 py-2 rounded-lg hover:bg-gray-700">
                        <i class="fas fa-user mr-2"></i>Mis Elite
                    </button>
                </div>

                <!-- Premier Queue Content -->
                <div id="premierQueue" class="tab-content">
                    <div id="premierQueueContent"></div>
                </div>

                <!-- Other premier tabs -->
                <div id="premierMatches" class="tab-content hidden">
                    <div class="mb-6 flex justify-between items-center">
                        <h3 class="text-xl font-bold">Partidas Elite En Vivo</h3>
                        <div class="text-sm text-purple-400">
                            <span class="text-red-400">‚óè</span> 2 partidas elite activas
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div class="bg-gradient-to-r from-purple-900 to-blue-900 rounded-xl p-6 card-hover border-l-4 border-yellow-500">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-4">
                                    <span class="bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-3 py-1 rounded-full text-xs font-bold pulse-animation">ELITE EN VIVO</span>
                                    <span class="font-semibold text-lg">Icebox</span>
                                    <span class="text-purple-300">28:15 transcurridos</span>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-6 mb-4">
                                <div class="bg-blue-900/30 rounded-lg p-4 border border-blue-500/30">
                                    <h4 class="text-blue-400 font-bold mb-3 text-center">Equipo A</h4>
                                    <div class="space-y-2 text-sm">
                                        <div><span>EliteAce#0001</span></div>
                                        <div><span>ProMaster#0002</span></div>
                                        <div><span>SkillGod#0003</span></div>
                                        <div><span>HeadHunter#0005</span></div>
                                        <div><span>QuickShot#0006</span></div>
                                    </div>
                                </div>
                                
                                <div class="bg-red-900/30 rounded-lg p-4 border border-red-500/30">
                                    <h4 class="text-red-400 font-bold mb-3 text-center">Equipo B</h4>
                                    <div class="space-y-2 text-sm">
                                        <div><span>AimBot#0004</span></div>
                                        <div><span>FastAim#0007</span></div>
                                        <div><span>PrecisionKill#0008</span></div>
                                        <div><span>EliteSniper#0009</span></div>
                                        <div><span>TacticalMind#0010</span></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center bg-gradient-to-r from-purple-800 to-blue-800 rounded-lg p-3 border border-yellow-500/30">
                                <span class="text-lg font-semibold text-yellow-400">Partida Elite en progreso</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="premierLeaderboard" class="tab-content hidden">
                    <div class="bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl overflow-hidden border border-purple-500">
                        <div class="p-6 border-b border-purple-500 bg-gradient-to-r from-purple-600 to-blue-600">
                            <h3 class="text-xl font-bold">üëë Elite Leaderboard</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-purple-900">
                                    <tr>
                                        <th class="px-2 py-3 text-left">#</th>
                                        <th class="px-3 py-3 text-left">Player</th>
                                        <th class="px-2 py-3 text-center">Matches</th>
                                        <th class="px-2 py-3 text-center">ACS</th>
                                        <th class="px-2 py-3 text-center">KDA</th>
                                        <th class="px-2 py-3 text-center">HS%</th>
                                        <th class="px-2 py-3 text-center">FK</th>
                                        <th class="px-2 py-3 text-center">KAST%</th>
                                        <th class="px-2 py-3 text-center">ADR</th>
                                        <th class="px-2 py-3 text-center">DDŒî</th>
                                        <th class="px-2 py-3 text-center">Score</th>
                                    </tr>
                                </thead>
                                <tbody id="eliteLeaderboardBody" class="divide-y divide-purple-800">
                                    <!-- Data will be populated from backend -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="premierMymatches" class="tab-content hidden">
                    <div class="mb-4 flex justify-between items-center">
                        <h3 class="text-xl font-bold">Mis Partidas Elite</h3>
                        <div class="text-sm text-purple-300">
                            <span class="text-green-400">8V</span> - <span class="text-red-400">2D</span> (80% WR Elite)
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-purple-900 to-blue-900 rounded-xl p-6 card-hover border border-purple-500">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-4">
                                    <div class="bg-green-600 w-4 h-4 rounded-full"></div>
                                    <span class="font-semibold">Victoria Elite</span>
                                    <span class="text-purple-300">hace 1 d√≠a</span>
                                </div>
                                <span class="text-green-400 font-bold">+45 Rating Elite</span>
                            </div>
                            <div class="flex justify-between items-center text-sm mb-2">
                                <span>Breeze</span>
                                <span class="text-purple-300">52:18 duraci√≥n</span>
                            </div>
                            <div class="flex items-center gap-4 text-xs text-purple-300">
                                <span>‚öîÔ∏è Duelista</span>
                                <span class="text-yellow-400">ELITE MVP</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Global State Management
        const AppState = {
            user: null,
            currentSection: 'public',
            currentTab: { public: 'queue', premier: 'queue' },
            selectedRoles: [],
            
            // User states for backend integration
            userStates: {
                IDLE: 'idle',
                IN_QUEUE: 'in_queue', 
                IN_MATCH: 'in_match',
                MATCH_LEADER: 'match_leader',
                WAITING_ROOM_CODE: 'waiting_room_code',
                WAITING_MATCH_URL: 'waiting_match_url'
            },
            
            // Current user state
            userState: 'idle',
            
            // Match data
            currentMatch: null,
            isEliteQueue: false
        };

        // Queue Content Templates
        const QueueTemplates = {
            // Idle state - can join queue
            idle: (isElite = false) => {
                const queueType = isElite ? 'Elite' : 'P√∫blicos';
                const gradientClass = isElite ? 'from-purple-800 via-blue-800 to-purple-900' : 'from-blue-600 via-purple-600 to-blue-800';
                const borderClass = isElite ? 'border-yellow-400/50' : 'border-blue-400/30';
                const buttonClass = isElite ? 'from-yellow-400 via-orange-500 to-yellow-600 hover:from-yellow-300 hover:via-orange-400 hover:to-yellow-500 text-black' : 'from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white';
                const icon = isElite ? 'üëë' : 'üéØ';
                const title = isElite ? 'Bienvenido a Elite' : '¬øListo para la batalla?';
                const description = isElite ? 'Compite contra los mejores jugadores en partidas de √©lite. Solo para los m√°s h√°biles.' : '√önete a la cola y encuentra oponentes de tu nivel. ¬°La pr√≥xima partida √©pica te est√° esperando!';
                const buttonText = isElite ? 'Unirse a Cola Elite' : 'Unirse a Cola';
                const buttonIcon = isElite ? 'fas fa-crown' : 'fas fa-play';
                
                return `
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-gradient-to-br ${gradientClass} rounded-2xl p-8 card-hover border ${borderClass} shadow-2xl">
                            <div class="text-center mb-6">
                                <div class="text-5xl mb-4">${icon}</div>
                                <h3 class="text-2xl font-bold mb-3 ${isElite ? 'bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent' : ''}">${title}</h3>
                                <p class="${isElite ? 'text-purple-200' : 'text-blue-100'} mb-6">${description}</p>
                            </div>
                            
                            <div class="space-y-4">
                                <button onclick="joinQueue(${isElite})" class="w-full bg-gradient-to-r ${buttonClass} px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 transform hover:scale-105 shadow-lg">
                                    <i class="${buttonIcon} mr-3"></i>${buttonText}
                                </button>
                                
                                <div class="grid grid-cols-3 gap-4 text-center text-sm">
                                    <div class="bg-white/10 rounded-lg p-3 ${isElite ? 'border border-purple-400/30' : ''}">
                                        <div class="text-lg font-bold ${isElite ? 'text-yellow-400' : 'text-green-400'}">${isElite ? '3' : '6'}</div>
                                        <div class="${isElite ? 'text-purple-200' : 'text-blue-200'}">${isElite ? 'Elite en Cola' : 'En Cola'}</div>
                                    </div>
                                    <div class="bg-white/10 rounded-lg p-3 ${isElite ? 'border border-purple-400/30' : ''}">
                                        <div class="text-lg font-bold ${isElite ? 'text-orange-400' : 'text-yellow-400'}">${isElite ? '~5 min' : '~3 min'}</div>
                                        <div class="${isElite ? 'text-purple-200' : 'text-blue-200'}">Tiempo Est.</div>
                                    </div>
                                    <div class="bg-white/10 rounded-lg p-3 ${isElite ? 'border border-purple-400/30' : ''}">
                                        <div class="text-lg font-bold ${isElite ? 'text-purple-400' : 'text-purple-400'}">${isElite ? '1' : '2'}</div>
                                        <div class="${isElite ? 'text-purple-200' : 'text-blue-200'}">Form√°ndose</div>
                                    </div>
                                </div>
                                
                                ${isElite ? `
                                <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-lg p-4 border border-purple-500/30">
                                    <div class="flex items-center justify-center gap-2 text-sm text-purple-200">
                                        <i class="fas fa-info-circle text-yellow-400"></i>
                                        <span>Acceso Elite requiere verificaci√≥n del staff</span>
                                    </div>
                                </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            },

            // In queue state
            inQueue: (isElite = false) => {
                const queueType = isElite ? 'Elite' : 'P√∫blica';
                const bgClass = isElite ? 'from-purple-900 to-blue-900' : 'from-blue-900 to-purple-900';
                const borderClass = isElite ? 'border-yellow-500' : 'border-blue-500';
                
                return `
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-gradient-to-r ${bgClass} rounded-xl p-6 border-2 ${borderClass}">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold">En Cola ${queueType}</h3>
                                <span class="bg-blue-600 px-3 py-1 rounded-full text-sm font-bold pulse-animation">BUSCANDO</span>
                            </div>
                            
                            <div class="text-center space-y-4">
                                <div class="text-4xl mb-4">‚è≥</div>
                                <p class="text-lg">Buscando jugadores...</p>
                                <p class="text-sm text-gray-300">Tiempo estimado: ~2 minutos</p>
                                
                                <button onclick="leaveQueue()" class="bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-bold transition-all">
                                    <i class="fas fa-times mr-2"></i>Salir de Cola
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            },

            // Match found - regular player
            inMatch: (isElite = false, matchData = null) => {
                const bgClass = isElite ? 'from-purple-900 to-blue-900' : 'from-blue-900 to-purple-900';
                const borderClass = isElite ? 'border-yellow-500' : 'border-blue-500';
                const queueType = isElite ? 'Elite' : 'P√∫blica';
                
                if (!matchData) {
                    matchData = {
                        map: 'Ascent',
                        userRole: 'Duelista',
                        userTeam: 'A',
                        teamA: { players: ['T√ö (ProGamer#1234)', 'Player2#1234', 'Player3#1234', 'Player4#1234', 'Player5#1234'], side: 'Atacando' },
                        teamB: { players: ['Enemy1#1234', 'Enemy2#1234', 'Enemy3#1234', 'Enemy4#1234', 'Enemy5#1234'], side: 'Defendiendo' }
                    };
                }
                
                return `
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-gradient-to-r ${bgClass} rounded-xl p-6 border-2 ${borderClass}">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold">Tu Partida ${queueType}</h3>
                                <span class="bg-green-600 px-3 py-1 rounded-full text-sm font-bold">EN PARTIDA</span>
                            </div>
                            <div class="space-y-4">
                                <div class="text-center space-y-2">
                                    <p class="text-lg font-semibold">${matchData.map}</p>
                                    <p class="text-yellow-400 font-bold">‚öîÔ∏è ${matchData.userRole}</p>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-blue-900/30 rounded-lg p-3 ${matchData.userTeam === 'A' ? 'border border-yellow-400' : ''}">
                                        <h4 class="text-blue-400 font-bold text-center mb-2 text-sm">
                                            Equipo A - ${matchData.teamA.side}
                                            ${matchData.userTeam === 'A' ? '<span class="text-yellow-400 text-xs">(TU EQUIPO)</span>' : ''}
                                        </h4>
                                        <div class="space-y-1 text-xs">
                                            ${matchData.teamA.players.map(player => 
                                                `<div class="${player.includes('T√ö') ? 'text-yellow-400 font-bold' : ''}">${player}</div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-900/30 rounded-lg p-3 ${matchData.userTeam === 'B' ? 'border border-yellow-400' : ''}">
                                        <h4 class="text-red-400 font-bold text-center mb-2 text-sm">
                                            Equipo B - ${matchData.teamB.side}
                                            ${matchData.userTeam === 'B' ? '<span class="text-yellow-400 text-xs">(TU EQUIPO)</span>' : ''}
                                        </h4>
                                        <div class="space-y-1 text-xs">
                                            ${matchData.teamB.players.map(player => 
                                                `<div class="${player.includes('T√ö') ? 'text-yellow-400 font-bold' : ''}">${player}</div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-gray-700/50 rounded-lg p-3 text-center">
                                    <p class="text-sm text-gray-300">Partida en progreso</p>
                                    <p class="text-xs text-gray-400 mt-1">Esperando que el l√≠der termine la partida</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },

            // Match leader - waiting for room code
            matchLeaderWaitingRoomCode: (isElite = false, matchData = null) => {
                const bgClass = isElite ? 'from-purple-900 to-orange-900' : 'from-yellow-900 to-orange-900';
                const borderClass = isElite ? 'border-yellow-500' : 'border-yellow-500';
                const queueType = isElite ? 'Elite' : 'P√∫blica';
                
                if (!matchData) {
                    matchData = {
                        map: 'Ascent',
                        userRole: 'Duelista',
                        userTeam: 'A',
                        teamA: { players: ['T√ö (ProGamer#1234) - L√çDER', 'Player2#1234', 'Player3#1234', 'Player4#1234', 'Player5#1234'], side: 'Atacando' },
                        teamB: { players: ['Enemy1#1234', 'Enemy2#1234', 'Enemy3#1234', 'Enemy4#1234', 'Enemy5#1234'], side: 'Defendiendo' }
                    };
                }
                
                return `
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-gradient-to-r ${bgClass} rounded-xl p-6 border-2 ${borderClass}">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold">L√≠der de Partida ${queueType}</h3>
                                <span class="bg-yellow-600 px-3 py-1 rounded-full text-sm font-bold text-black">L√çDER</span>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="text-center space-y-2">
                                    <p class="text-lg font-semibold">${matchData.map}</p>
                                    <p class="text-yellow-400 font-bold">‚öîÔ∏è ${matchData.userRole}</p>
                                    <p class="text-yellow-400">Como l√≠der, debes crear el room code</p>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                    <div class="bg-blue-900/30 rounded-lg p-3 ${matchData.userTeam === 'A' ? 'border border-yellow-400' : ''}">
                                        <h4 class="text-blue-400 font-bold text-center mb-2 text-sm">
                                            Equipo A - ${matchData.teamA.side}
                                            ${matchData.userTeam === 'A' ? '<span class="text-yellow-400 text-xs">(TU EQUIPO)</span>' : ''}
                                        </h4>
                                        <div class="space-y-1 text-xs">
                                            ${matchData.teamA.players.map(player => 
                                                `<div class="${player.includes('T√ö') || player.includes('L√çDER') ? 'text-yellow-400 font-bold' : ''}">${player}</div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-900/30 rounded-lg p-3 ${matchData.userTeam === 'B' ? 'border border-yellow-400' : ''}">
                                        <h4 class="text-red-400 font-bold text-center mb-2 text-sm">
                                            Equipo B - ${matchData.teamB.side}
                                            ${matchData.userTeam === 'B' ? '<span class="text-yellow-400 text-xs">(TU EQUIPO)</span>' : ''}
                                        </h4>
                                        <div class="space-y-1 text-xs">
                                            ${matchData.teamB.players.map(player => 
                                                `<div class="${player.includes('T√ö') || player.includes('L√çDER') ? 'text-yellow-400 font-bold' : ''}">${player}</div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-yellow-900/50 rounded-lg p-4">
                                    <label class="block text-sm font-semibold mb-2">Room Code (3 letras + 3 n√∫meros)</label>
                                    <div class="flex gap-2">
                                        <input type="text" id="roomCodeInput" placeholder="ABC123" maxlength="6" 
                                               class="flex-1 px-4 py-3 bg-white/10 border border-yellow-400/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400 uppercase"
                                               oninput="validateRoomCode(this)">
                                        <button id="submitRoomCode" onclick="submitRoomCode()" disabled
                                                class="bg-yellow-600 hover:bg-yellow-500 text-black px-6 py-3 rounded-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed">
                                            Enviar
                                        </button>
                                    </div>
                                    <p class="text-xs text-yellow-200 mt-2">Ejemplo: ABC123, XYZ789</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },

            // Match leader - waiting for match URL
            matchLeaderWaitingMatchUrl: (isElite = false, matchData = null) => {
                const bgClass = isElite ? 'from-purple-900 to-orange-900' : 'from-yellow-900 to-orange-900';
                const borderClass = isElite ? 'border-yellow-500' : 'border-yellow-500';
                const queueType = isElite ? 'Elite' : 'P√∫blica';
                const roomCode = matchData?.roomCode || 'ABC123';
                
                if (!matchData) {
                    matchData = {
                        map: 'Ascent',
                        userRole: 'Duelista',
                        userTeam: 'A',
                        teamA: { players: ['T√ö (ProGamer#1234) - L√çDER', 'Player2#1234', 'Player3#1234', 'Player4#1234', 'Player5#1234'], side: 'Atacando' },
                        teamB: { players: ['Enemy1#1234', 'Enemy2#1234', 'Enemy3#1234', 'Enemy4#1234', 'Enemy5#1234'], side: 'Defendiendo' },
                        roomCode: roomCode
                    };
                }
                
                return `
                    <div class="max-w-2xl mx-auto">
                        <div class="bg-gradient-to-r ${bgClass} rounded-xl p-6 border-2 ${borderClass}">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold">L√≠der de Partida ${queueType}</h3>
                                <span class="bg-yellow-600 px-3 py-1 rounded-full text-sm font-bold text-black">L√çDER</span>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="text-center space-y-2">
                                    <p class="text-lg font-semibold">${matchData.map}</p>
                                    <p class="text-yellow-400 font-bold">‚öîÔ∏è ${matchData.userRole}</p>
                                    <p class="text-green-400">‚úÖ Room Code: <span class="font-bold">${roomCode}</span></p>
                                    <p class="text-yellow-400">Partida iniciada - Esperando finalizaci√≥n</p>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                    <div class="bg-blue-900/30 rounded-lg p-3 ${matchData.userTeam === 'A' ? 'border border-yellow-400' : ''}">
                                        <h4 class="text-blue-400 font-bold text-center mb-2 text-sm">
                                            Equipo A - ${matchData.teamA.side}
                                            ${matchData.userTeam === 'A' ? '<span class="text-yellow-400 text-xs">(TU EQUIPO)</span>' : ''}
                                        </h4>
                                        <div class="space-y-1 text-xs">
                                            ${matchData.teamA.players.map(player => 
                                                `<div class="${player.includes('T√ö') || player.includes('L√çDER') ? 'text-yellow-400 font-bold' : ''}">${player}</div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-900/30 rounded-lg p-3 ${matchData.userTeam === 'B' ? 'border border-yellow-400' : ''}">
                                        <h4 class="text-red-400 font-bold text-center mb-2 text-sm">
                                            Equipo B - ${matchData.teamB.side}
                                            ${matchData.userTeam === 'B' ? '<span class="text-yellow-400 text-xs">(TU EQUIPO)</span>' : ''}
                                        </h4>
                                        <div class="space-y-1 text-xs">
                                            ${matchData.teamB.players.map(player => 
                                                `<div class="${player.includes('T√ö') || player.includes('L√çDER') ? 'text-yellow-400 font-bold' : ''}">${player}</div>`
                                            ).join('')}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-green-900/50 rounded-lg p-4">
                                    <label class="block text-sm font-semibold mb-2">URL del Match (Valorant Tracker)</label>
                                    <div class="flex gap-2">
                                        <input type="url" id="matchUrlInput" placeholder="https://tracker.gg/valorant/match/..." 
                                               class="flex-1 px-4 py-3 bg-white/10 border border-green-400/50 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-green-400">
                                        <button onclick="submitMatchUrl()" 
                                                class="bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-bold">
                                            Finalizar
                                        </button>
                                    </div>
                                    <p class="text-xs text-green-200 mt-2">Ingresa la URL del match de Valorant Tracker para finalizar la partida</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        };

        // State Management Functions
        function updateUserState(newState, matchData = null) {
            AppState.userState = newState;
            AppState.currentMatch = matchData;
            updateQueueContent();
        }

        function updateQueueContent() {
            const isElite = AppState.currentSection === 'premier';
            const contentId = isElite ? 'premierQueueContent' : 'publicQueueContent';
            const contentElement = document.getElementById(contentId);
            
            if (!contentElement) return;

            let content = '';
            
            switch (AppState.userState) {
                case AppState.userStates.IDLE:
                    content = QueueTemplates.idle(isElite);
                    break;
                case AppState.userStates.IN_QUEUE:
                    content = QueueTemplates.inQueue(isElite);
                    break;
                case AppState.userStates.IN_MATCH:
                    content = QueueTemplates.inMatch(isElite, AppState.currentMatch);
                    break;
                case AppState.userStates.WAITING_ROOM_CODE:
                    content = QueueTemplates.matchLeaderWaitingRoomCode(isElite, AppState.currentMatch);
                    break;
                case AppState.userStates.WAITING_MATCH_URL:
                    content = QueueTemplates.matchLeaderWaitingMatchUrl(isElite, AppState.currentMatch);
                    break;
                default:
                    content = QueueTemplates.idle(isElite);
            }
            
            contentElement.innerHTML = content;
        }

        // User Actions
        function loginWithDiscord() {
            setTimeout(() => {
                const isNewUser = Math.random() > 0.2;
                
                if (isNewUser) {
                    document.getElementById('loginScreen').classList.add('hidden');
                    document.getElementById('setupPanel').classList.remove('hidden');
                } else {
                    AppState.user = {
                        username: 'GamerPro#1234',
                        riotId: 'ProGamer#1234',
                        roles: ['duelista', 'iniciador'],
                        avatar: 'https://via.placeholder.com/32x32/5865F2/FFFFFF?text=GP',
                        isPremier: true
                    };
                    
                    document.getElementById('loginScreen').classList.add('hidden');
                    document.getElementById('dashboard').classList.remove('hidden');
                    document.getElementById('username').textContent = AppState.user.username;
                    updateQueueContent();
                }
            }, 1500);
        }

        function toggleRole(role) {
            const roleCard = event.target.closest('.role-card');
            
            if (AppState.selectedRoles.includes(role)) {
                AppState.selectedRoles = AppState.selectedRoles.filter(r => r !== role);
                roleCard.classList.remove('bg-blue-600', 'border-blue-400');
                roleCard.classList.add('bg-white/5', 'border-white/20');
            } else if (AppState.selectedRoles.length < 2) {
                AppState.selectedRoles.push(role);
                roleCard.classList.remove('bg-white/5', 'border-white/20');
                roleCard.classList.add('bg-blue-600', 'border-blue-400');
            } else {
                alert('Solo puedes seleccionar m√°ximo 2 roles');
            }
        }

        function completeSetup() {
            const riotId = document.getElementById('riotId').value.trim();
            
            if (!riotId) {
                alert('Por favor ingresa tu Riot ID');
                return;
            }
            
            if (AppState.selectedRoles.length === 0) {
                alert('Por favor selecciona al menos un rol');
                return;
            }
            
            AppState.user = {
                username: 'GamerPro#1234',
                riotId: riotId,
                roles: AppState.selectedRoles,
                avatar: 'https://via.placeholder.com/32x32/5865F2/FFFFFF?text=GP',
                isPremier: true,
                isNewUser: true
            };
            
            document.getElementById('setupPanel').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('username').textContent = AppState.user.username;
            updateQueueContent();
            
            setTimeout(() => {
                alert(`¬°Bienvenido ${AppState.user.riotId}! Tu perfil ha sido configurado con los roles: ${AppState.selectedRoles.join(', ')}`);
            }, 500);
        }

        function logout() {
            AppState.user = null;
            AppState.selectedRoles = [];
            AppState.userState = AppState.userStates.IDLE;
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('setupPanel').classList.add('hidden');
        }

        function showSection(section) {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
            });
            event.target.classList.add('bg-blue-600', 'text-white');
            event.target.classList.remove('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');

            document.querySelectorAll('.section').forEach(sec => sec.classList.add('hidden'));
            document.getElementById(section + 'Section').classList.remove('hidden');
            
            AppState.currentSection = section;
            updateQueueContent();
        }

        function showTab(section, tab) {
            const tabButtons = document.querySelectorAll(`#${section}Section .tab-btn`);
            tabButtons.forEach(btn => {
                btn.classList.remove('bg-blue-600', 'bg-purple-600', 'text-white');
                btn.classList.add('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');
            });
            
            event.target.classList.add(section === 'premier' ? 'bg-purple-600' : 'bg-blue-600', 'text-white');
            event.target.classList.remove('text-gray-300', 'hover:text-white', 'hover:bg-gray-700');

            document.querySelectorAll(`#${section}Section .tab-content`).forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(section + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('hidden');
            
            AppState.currentTab[section] = tab;
            
            // Load appropriate data based on tab
            if (tab === 'queue') {
                updateQueueContent();
            } else if (tab === 'leaderboard') {
                populateLeaderboard(section === 'premier');
            }
        }

        // Queue Actions
        function joinQueue(isElite = false) {
            if (AppState.userState !== AppState.userStates.IDLE) {
                alert('Ya est√°s en una cola o partida');
                return;
            }

            if (isElite && (!AppState.user || !AppState.user.isPremier)) {
                alert('Necesitas verificaci√≥n del staff para acceder a partidas Elite.');
                return;
            }

            AppState.isEliteQueue = isElite;
            updateUserState(AppState.userStates.IN_QUEUE);
            
            // Simulate finding match
            setTimeout(() => {
                const isLeader = Math.random() > 0.5;
                const matchData = {
                    map: 'Ascent',
                    isElite: isElite,
                    isLeader: isLeader
                };
                
                if (isLeader) {
                    updateUserState(AppState.userStates.WAITING_ROOM_CODE, matchData);
                } else {
                    updateUserState(AppState.userStates.IN_MATCH, matchData);
                }
            }, 3000);
        }

        function leaveQueue() {
            updateUserState(AppState.userStates.IDLE);
        }

        // Room Code Functions
        function validateRoomCode(input) {
            const value = input.value.toUpperCase();
            const regex = /^[A-Z]{0,3}[0-9]{0,3}$/;
            
            if (!regex.test(value)) {
                input.value = value.slice(0, -1);
                return;
            }
            
            input.value = value;
            
            const submitBtn = document.getElementById('submitRoomCode');
            if (submitBtn) {
                if (value.length === 6 && /^[A-Z]{3}[0-9]{3}$/.test(value)) {
                    submitBtn.disabled = false;
                } else {
                    submitBtn.disabled = true;
                }
            }
        }

        function submitRoomCode() {
            const roomCode = document.getElementById('roomCodeInput').value;
            
            if (!/^[A-Z]{3}[0-9]{3}$/.test(roomCode)) {
                alert('Formato incorrecto. Debe ser 3 letras may√∫sculas seguidas de 3 n√∫meros.');
                return;
            }
            
            AppState.currentMatch.roomCode = roomCode;
            updateUserState(AppState.userStates.WAITING_MATCH_URL, AppState.currentMatch);
            
            alert(`Room Code ${roomCode} enviado correctamente. La partida ha comenzado.`);
        }

        function submitMatchUrl() {
            const matchUrl = document.getElementById('matchUrlInput').value;
            
            if (!matchUrl || !matchUrl.includes('tracker.gg')) {
                alert('Por favor ingresa una URL v√°lida de Valorant Tracker.');
                return;
            }
            
            alert('¬°Partida finalizada correctamente! Los resultados han sido registrados.');
            updateUserState(AppState.userStates.IDLE);
        }

        function openStream(playerName) {
            alert(`Abriendo stream de ${playerName}... (Conectar con API de Twitch)`);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateQueueContent();
            populateLeaderboard(false); // Load public leaderboard by default
        });

        // Leaderboard Functions
        function populateLeaderboard(isElite = false) {
            const tableBodyId = isElite ? 'eliteLeaderboardBody' : 'publicLeaderboardBody';
            const tableBody = document.getElementById(tableBodyId);
            
            if (!tableBody) return;
            
            // This will be replaced with actual backend data
            const sampleData = isElite ? [
                { rank: 1, player: 'EliteAce#0001', matches: 89, acs: 285, kda: 1.45, hs: 28.5, fk: 0.85, kast: 78.2, adr: 165.3, dd: 15.2, score: 4892 },
                { rank: 2, player: 'ProMaster#0002', matches: 76, acs: 278, kda: 1.38, hs: 26.8, fk: 0.82, kast: 76.5, adr: 162.1, dd: 12.8, score: 4654 },
                { rank: 3, player: 'SkillGod#0003', matches: 82, acs: 272, kda: 1.42, hs: 29.1, fk: 0.79, kast: 75.8, adr: 158.9, dd: 11.5, score: 4523 }
            ] : [
                { rank: 1, player: 'ProGamer#2023', matches: 156, acs: 245, kda: 1.25, hs: 24.2, fk: 0.72, kast: 72.5, adr: 142.8, dd: 8.5, score: 2847 },
                { rank: 2, player: 'SkillMaster#1337', matches: 143, acs: 238, kda: 1.18, hs: 22.8, fk: 0.68, kast: 70.2, adr: 138.5, dd: 6.2, score: 2654 },
                { rank: 3, player: 'AcePlayer#9999', matches: 128, acs: 235, kda: 1.22, hs: 25.1, fk: 0.71, kast: 71.8, adr: 140.2, dd: 7.8, score: 2589 }
            ];
            
            tableBody.innerHTML = sampleData.map(player => {
                const rankBadge = player.rank === 1 ? 
                    `<span class="bg-gradient-to-r from-yellow-400 to-orange-500 text-black px-2 py-1 rounded font-bold">${player.rank}</span>` :
                    player.rank === 2 ?
                    `<span class="bg-gradient-to-r from-gray-300 to-gray-400 text-black px-2 py-1 rounded font-bold">${player.rank}</span>` :
                    player.rank === 3 ?
                    `<span class="bg-gradient-to-r from-orange-400 to-orange-600 text-black px-2 py-1 rounded font-bold">${player.rank}</span>` :
                    `<span class="bg-gray-600 text-white px-2 py-1 rounded font-bold">${player.rank}</span>`;
                
                const playerIcon = isElite ? 'üëë' : 'üéÆ';
                const nameColor = isElite ? 'text-yellow-400' : 'text-blue-400';
                
                return `
                    <tr class="hover:bg-${isElite ? 'purple' : 'gray'}-700/50">
                        <td class="px-2 py-3">${rankBadge}</td>
                        <td class="px-3 py-3">
                            <div class="flex items-center gap-2">
                                <span class="text-lg">${playerIcon}</span>
                                <span class="font-semibold ${nameColor}">${player.player}</span>
                            </div>
                        </td>
                        <td class="px-2 py-3 text-center">${player.matches}</td>
                        <td class="px-2 py-3 text-center text-green-400">${player.acs}</td>
                        <td class="px-2 py-3 text-center text-blue-400">${player.kda}</td>
                        <td class="px-2 py-3 text-center text-purple-400">${player.hs}%</td>
                        <td class="px-2 py-3 text-center text-orange-400">${player.fk}</td>
                        <td class="px-2 py-3 text-center text-cyan-400">${player.kast}%</td>
                        <td class="px-2 py-3 text-center text-red-400">${player.adr}</td>
                        <td class="px-2 py-3 text-center ${player.dd >= 0 ? 'text-green-400' : 'text-red-400'}">${player.dd >= 0 ? '+' : ''}${player.dd}</td>
                        <td class="px-2 py-3 text-center text-yellow-400 font-bold">${player.score}</td>
                    </tr>
                `;
            }).join('');
        }

        // Backend Integration Functions (for your backend)
        const BackendAPI = {
            // These functions should be connected to your actual backend
            
            async getUserState() {
                // GET /api/user/state
                // Returns: { 
                //   state: 'idle|in_queue|in_match|match_leader', 
                //   matchData: {
                //     map: string,
                //     userRole: string,
                //     userTeam: 'A'|'B',
                //     teamA: { players: string[], side: 'Atacando'|'Defendiendo' },
                //     teamB: { players: string[], side: 'Atacando'|'Defendiendo' },
                //     roomCode?: string,
                //     queueType: 'public'|'elite'
                //   }
                // }
            },
            
            async joinQueue(isElite) {
                // POST /api/queue/join
                // Body: { queueType: 'public'|'elite' }
                // Returns: { success: boolean, message: string }
            },
            
            async leaveQueue() {
                // POST /api/queue/leave
                // Returns: { success: boolean, message: string }
            },
            
            async submitRoomCode(roomCode) {
                // POST /api/match/room-code
                // Body: { roomCode: string }
                // Returns: { success: boolean, message: string }
            },
            
            async submitMatchUrl(matchUrl) {
                // POST /api/match/complete
                // Body: { matchUrl: string }
                // Returns: { success: boolean, message: string }
            },
            
            async getQueueStats(isElite) {
                // GET /api/queue/stats?type=public|elite
                // Returns: { 
                //   playersInQueue: number, 
                //   estimatedTime: string, 
                //   matchesForming: number,
                //   activeMatches: number
                // }
            },
            
            async getLeaderboard(isElite) {
                // GET /api/leaderboard?type=public|elite
                // Returns: [{
                //   rank: number,
                //   player: string,
                //   matches: number,
                //   acs: number,
                //   kda: number,
                //   hs: number,
                //   fk: number,
                //   kast: number,
                //   adr: number,
                //   dd: number,
                //   score: number
                // }]
            },
            
            async getUserMatches(isElite) {
                // GET /api/user/matches?type=public|elite
                // Returns: [{
                //   id: string,
                //   map: string,
                //   result: 'win'|'loss',
                //   score: string,
                //   duration: string,
                //   role: string,
                //   ratingChange: number,
                //   date: string,
                //   mvp: boolean
                // }]
            }
        };
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97fcd13996916dba',t:'MTc1Nzk4ODUyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
