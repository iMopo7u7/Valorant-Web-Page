<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Randomizer - Valorant</title>
    <style>
        :root {
            --bg-color: #0f1923;
            --card-color: #1a1a1a;
            --text-color: #e0e0e0;
            --primary-color: #ff4655;
            --secondary-color: #0f1923;
            --accent-color: #7688a8;
            --border-color: #2e2e2e;
            --team-a-color: #ff4655;
            --team-b-color: #0f8cff;
            --team-c-color: #4caf50;
            --team-d-color: #ff9800;
            --team-e-color: #9c27b0;
            --highlight-color: #ffcc00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .nav-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 70, 85, 0.3);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--team-a-color), var(--team-b-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .config-section {
            background-color: var(--card-color);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .config-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .config-group {
            flex: 1;
            min-width: 200px;
        }

        .config-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .config-group select, 
        .config-group input {
            width: 100%;
            padding: 10px 15px;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            color: var(--text-color);
            font-size: 16px;
        }

        .players-input-container {
            margin-top: 20px;
        }

        .players-input {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .input-group input {
            width: 100%;
            padding: 10px 15px;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            color: var(--text-color);
            font-size: 16px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 70, 85, 0.3);
        }

        #randomize-btn {
            background-color: var(--primary-color);
        }

        #reset-btn {
            background-color: var(--accent-color);
            color: #333;
        }

        button i {
            transition: transform 0.3s;
        }

        button.spinning i {
            transform: rotate(360deg);
        }

        .teams-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }

        .team {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 20px;
            min-height: 200px;
        }

        .team-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .team-a .team-header {
            color: var(--team-a-color);
        }

        .team-b .team-header {
            color: var(--team-b-color);
        }

        .team-c .team-header {
            color: var(--team-c-color);
        }

        .team-d .team-header {
            color: var(--team-d-color);
        }

        .team-e .team-header {
            color: var(--team-e-color);
        }

        .team-header h2 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .players-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .player-card {
            background-color: var(--bg-color);
            padding: 12px 15px;
            border-radius: 5px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .player-card.highlight {
            background-color: var(--highlight-color);
            color: #333;
            transform: scale(1.02);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }

        .team-a .player-card {
            border-left: 4px solid var(--team-a-color);
        }

        .team-b .player-card {
            border-left: 4px solid var(--team-b-color);
        }

        .team-c .player-card {
            border-left: 4px solid var(--team-c-color);
        }

        .team-d .player-card {
            border-left: 4px solid var(--team-d-color);
        }

        .team-e .player-card {
            border-left: 4px solid var(--team-e-color);
        }

        .player-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .player-name {
            flex-grow: 1;
        }

        .status {
            text-align: center;
            margin: 20px 0;
            min-height: 24px;
            font-size: 1.1rem;
            color: var(--accent-color);
        }

        @keyframes ruleta {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .ruleta-animation {
            animation: ruleta 0.3s ease-out;
        }

        @media (max-width: 600px) {
            .teams-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-buttons">
            <a href="map-randomizer.html" class="nav-btn">
                <i class="fas fa-map"></i> Sortear Mapa
            </a>
            <a href="#" class="nav-btn">
                <i class="fas fa-users"></i> Sortear Equipos
            </a>
        </div>

        <header>
            <h1>VALORANT TEAM RANDOMIZER</h1>
            <p>Ingresa los nombres de jugadores y divídelos en equipos balanceados</p>
        </header>

        <div class="config-section">
            <div class="config-row">
                <div class="config-group">
                    <label for="total-players">Total de Jugadores</label>
                    <select id="total-players">
                        <option value="5">5 (1 equipo)</option>
                        <option value="10" selected>10 (2 equipos)</option>
                        <option value="15">15 (3 equipos)</option>
                        <option value="20">20 (4 equipos)</option>
                        <option value="25">25 (5 equipos)</option>
                    </select>
                </div>
                <div class="config-group">
                    <label for="players-per-team">Jugadores por Equipo</label>
                    <input type="number" id="players-per-team" value="5" min="1" readonly>
                </div>
            </div>
        </div>

        <div class="input-section">
            <div class="players-input-container">
                <div class="players-input" id="players-input">
                    <!-- Los inputs se generarán dinámicamente -->
                </div>
            </div>

            <div class="controls">
                <button id="randomize-btn">
                    <i class="fas fa-random"></i> Sortear Equipos
                </button>
                <button id="reset-btn">
                    <i class="fas fa-redo"></i> Reiniciar
                </button>
            </div>
        </div>

        <div class="status" id="status"></div>

        <div class="teams-container" id="teams-container">
            <!-- Los equipos se generarán dinámicamente -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const totalPlayersSelect = document.getElementById('total-players');
            const playersPerTeamInput = document.getElementById('players-per-team');
            const playersInputContainer = document.getElementById('players-input');
            const teamsContainer = document.getElementById('teams-container');
            const randomizeBtn = document.getElementById('randomize-btn');
            const resetBtn = document.getElementById('reset-btn');
            const statusEl = document.getElementById('status');
            
            let players = [];
            let isRandomizing = false;
            let randomizationInterval;
            const fixedDelay = 800; // Delay fijo para la animación
            const teamColors = ['A', 'B', 'C', 'D', 'E'];
            const teamColorValues = {
                'A': 'var(--team-a-color)',
                'B': 'var(--team-b-color)',
                'C': 'var(--team-c-color)',
                'D': 'var(--team-d-color)',
                'E': 'var(--team-e-color)'
            };

            // Cargar Font Awesome
            const faScript = document.createElement('script');
            faScript.src = 'https://kit.fontawesome.com/a076d05399.js';
            document.head.appendChild(faScript);

            // Inicializar
            generatePlayerInputs(10);
            generateTeams(2);

            // Event listeners
            totalPlayersSelect.addEventListener('change', function() {
                const totalPlayers = parseInt(this.value);
                const teamCount = totalPlayers / parseInt(playersPerTeamInput.value);
                generatePlayerInputs(totalPlayers);
                generateTeams(teamCount);
            });

            randomizeBtn.addEventListener('click', startRandomization);
            resetBtn.addEventListener('click', resetAll);

            function generatePlayerInputs(count) {
                playersInputContainer.innerHTML = '';
                
                for (let i = 1; i <= count; i++) {
                    const inputGroup = document.createElement('div');
                    inputGroup.className = 'input-group';
                    inputGroup.innerHTML = `
                        <label for="player${i}">Jugador ${i}</label>
                        <input type="text" id="player${i}" placeholder="Nombre del jugador">
                    `;
                    playersInputContainer.appendChild(inputGroup);
                }
            }

            function generateTeams(count) {
                teamsContainer.innerHTML = '';
                
                for (let i = 0; i < count; i++) {
                    const team = document.createElement('div');
                    team.className = `team team-${teamColors[i].toLowerCase()}`;
                    team.innerHTML = `
                        <div class="team-header">
                            <h2>TEAM ${teamColors[i]}</h2>
                            <p>0 jugadores</p>
                        </div>
                        <div class="players-list" id="team-${teamColors[i].toLowerCase()}">
                            <!-- Jugadores del equipo -->
                        </div>
                    `;
                    teamsContainer.appendChild(team);
                }
            }

            function getPlayers() {
                const totalPlayers = parseInt(totalPlayersSelect.value);
                players = [];
                
                for (let i = 1; i <= totalPlayers; i++) {
                    const playerInput = document.getElementById(`player${i}`);
                    if (playerInput && playerInput.value.trim() !== '') {
                        players.push({
                            id: i,
                            name: playerInput.value.trim(),
                            team: null
                        });
                    }
                }
                
                if (players.length !== totalPlayers) {
                    alert(`Por favor ingresa exactamente ${totalPlayers} nombres de jugadores`);
                    return false;
                }
                
                return true;
            }

            function startRandomization() {
                if (isRandomizing) {
                    stopRandomization();
                    return;
                }

                if (!getPlayers()) return;

                isRandomizing = true;
                randomizeBtn.classList.add('spinning');
                randomizeBtn.innerHTML = '<i class="fas fa-stop"></i> Detener';
                statusEl.textContent = 'Sortando jugadores...';
                
                // Mezclar jugadores
                shufflePlayers();
                
                // Asignar equipos inicialmente a todos como null
                players.forEach(player => player.team = null);
                
                // Limpiar equipos antes de empezar
                clearTeams();
                
                // Iniciar el proceso de asignación
                startAssignmentProcess();
            }

            function clearTeams() {
                const teamElements = document.querySelectorAll('.players-list');
                teamElements.forEach(team => team.innerHTML = '');
                updateTeamCounters();
            }

            function shufflePlayers() {
                for (let i = players.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [players[i], players[j]] = [players[j], players[i]];
                }
            }

            function startAssignmentProcess() {
                let currentIndex = 0;
                const playersPerTeam = parseInt(playersPerTeamInput.value);
                const teamCount = parseInt(totalPlayersSelect.value) / playersPerTeam;
                
                randomizationInterval = setInterval(() => {
                    if (currentIndex >= players.length) {
                        finishRandomization();
                        return;
                    }
                    
                    // Determinar el equipo actual
                    const teamIndex = Math.floor(currentIndex / playersPerTeam) % teamCount;
                    const team = teamColors[teamIndex];
                    
                    // Resaltar el jugador actual
                    highlightPlayer(currentIndex, () => {
                        // Asignar equipo
                        players[currentIndex].team = team;
                        currentIndex++;
                        
                        // Renderizar jugadores
                        renderTeams();
                    });
                    
                }, fixedDelay);
            }

            function highlightPlayer(index, callback) {
                const player = players[index];
                const playerElements = Array.from(document.querySelectorAll('.player-card'));
                const playerElement = playerElements.find(el => el.dataset.id === `player-${player.id}`);
                
                if (playerElement) {
                    playerElement.classList.add('highlight');
                    playerElement.classList.add('ruleta-animation');
                    
                    setTimeout(() => {
                        playerElement.classList.remove('highlight');
                        playerElement.classList.remove('ruleta-animation');
                        if (callback) callback();
                    }, 500);
                } else {
                    if (callback) callback();
                }
            }

            function renderTeams() {
                // Limpiar todos los equipos
                clearTeams();
                
                // Agregar jugadores a sus equipos
                players.forEach(player => {
                    if (player.team) {
                        const teamElement = document.getElementById(`team-${player.team.toLowerCase()}`);
                        if (teamElement) {
                            const playerCard = document.createElement('div');
                            playerCard.className = 'player-card';
                            playerCard.dataset.id = `player-${player.id}`;
                            playerCard.innerHTML = `
                                <div class="player-avatar">${player.id}</div>
                                <div class="player-name">${player.name}</div>
                            `;
                            teamElement.appendChild(playerCard);
                        }
                    }
                });
                
                updateTeamCounters();
            }

            function updateTeamCounters() {
                const teamHeaders = document.querySelectorAll('.team-header p');
                teamHeaders.forEach(header => {
                    const teamId = header.closest('.team').id.replace('team-', '').toUpperCase();
                    const playerCount = document.getElementById(`team-${teamId.toLowerCase()}`)?.children.length || 0;
                    header.textContent = `${playerCount} jugadores`;
                });
            }

            function stopRandomization() {
                clearInterval(randomizationInterval);
                isRandomizing = false;
                randomizeBtn.classList.remove('spinning');
                randomizeBtn.innerHTML = '<i class="fas fa-random"></i> Sortear Equipos';
                statusEl.textContent = 'Sorteo detenido';
            }

            function finishRandomization() {
                clearInterval(randomizationInterval);
                isRandomizing = false;
                randomizeBtn.classList.remove('spinning');
                randomizeBtn.innerHTML = '<i class="fas fa-random"></i> Sortear Equipos';
                statusEl.textContent = '¡Equipos formados!';
            }

            function resetAll() {
                clearInterval(randomizationInterval);
                isRandomizing = false;
                players = [];
                
                // Limpiar inputs
                const inputs = document.querySelectorAll('.players-input input');
                inputs.forEach(input => input.value = '');
                
                // Limpiar equipos
                clearTeams();
                
                randomizeBtn.classList.remove('spinning');
                randomizeBtn.innerHTML = '<i class="fas fa-random"></i> Sortear Equipos';
                statusEl.textContent = '';
            }
        });
    </script>
</body>
</html>
